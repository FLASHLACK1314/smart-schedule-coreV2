# 教务管理员管理 - 前端开发文档

## 功能说明

**功能描述**：管理系统中的教务管理员账号，支持添加、编辑、删除和查询教务人员信息。

**示例**：系统管理员可以添加各学院的教务人员，为其分配账号，管理其基本信息。

---

## 页面信息

**页面路径**：`/academic-management`
**路由名称**：`AcademicManagement`
**可见用户**：`SYSTEM_ADMIN`（仅系统管理员）

---

## API 接口

### 主要接口

| 功能 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 分页查询 | GET | `/v1/academic/getPage` | 获取教务管理员列表，支持筛选 |
| 获取详情 | GET | `/v1/academic/get` | 获取单个教务管理员信息 |
| 添加 | POST | `/v1/academic/add` | 添加新教务管理员（密码必填） |
| 更新 | PUT | `/v1/academic/update` | 更新教务管理员信息（密码可选） |
| 删除 | DELETE | `/v1/academic/delete` | 删除教务管理员 |

### 分页查询接口

**路径**：`GET /v1/academic/getPage`

**查询参数**（蛇形命名）：
- `page` (number, 必填) - 页码，默认 1
- `size` (number, 必填) - 每页数量，默认 10
- `academic_name` (string, 可选) - 教务名称，模糊查询
- `academic_num` (string, 可选) - 教务工号，模糊查询
- `department_uuid` (string, 可选) - 学院UUID，精确查询

**响应字段**：
```json
{
  "total": 10,
  "page": 1,
  "size": 10,
  "records": [
    {
      "academicUuid": "xxx",
      "academicNum": "JW001",
      "academicName": "张教务",
      "departmentInfo": {
        "departmentUuid": "xxx",
        "departmentName": "计算机学院"
      }
    }
  ]
}
```

### 获取详情接口

**路径**：`GET /v1/academic/get`

**查询参数**（蛇形命名）：
- `academic_uuid` (string, 必填) - 教务管理员UUID

### 添加接口

**路径**：`POST /v1/academic/add`

**请求体字段**（驼峰命名）：
```json
{
  "academicNum": "JW001",       // 教务工号（必填）
  "academicName": "张教务",      // 教务名称（必填）
  "departmentUuid": "xxx",      // 所属学院UUID（必填）
  "academicPassword": "123456"  // 密码（必填）
}
```

### 更新接口

**路径**：`PUT /v1/academic/update`

**请求体字段**（驼峰命名）：
```json
{
  "academicUuid": "xxx",        // 教务UUID（必填）
  "academicNum": "JW001",       // 教务工号（必填）
  "academicName": "张教务",      // 教务名称（必填）
  "departmentUuid": "xxx",      // 所属学院UUID（必填）
  "academicPassword": ""        // 密码（可选，为空则不更新）
}
```

### 删除接口

**路径**：`DELETE /v1/academic/delete`

**查询参数**（蛇形命名）：
- `academic_uuid` (string, 必填) - 教务管理员UUID

---

## 页面功能

### 核心功能
- [ ] 列表展示（卡片或表格形式）
- [ ] 搜索/筛选功能（按姓名、工号、学院筛选）
- [ ] 添加功能（对话框）
- [ ] 编辑功能（对话框）
- [ ] 删除功能（二次确认）

### 交互细节
- 使用 `useMessage` composable 进行消息提示
- 禁止使用浏览器原生 `alert()`
- 加载状态显示（loading spinner）
- 空数据提示
- 删除前二次确认（`confirm` 或自定义确认框）

---

## 命名规范

**重要**：
- **URL 查询参数**：蛇形命名（snake_case）
  - 示例：`academic_uuid`, `academic_num`, `department_uuid`

- **请求体字段**：驼峰命名（camelCase）
  - 示例：`academicUuid`, `academicNum`, `departmentUuid`

---

## 参考文件

**参考页面**：
- `src/views/TeacherManagementView.vue` - 完整的管理页面模板（含学院下拉选择）
- `src/views/CourseTypeManagementView.vue` - 简单管理页面参考

**API 模块**：
- `src/api/teacher.ts` - API 模块模式参考

**工具**：
- `src/composables/useMessage.ts` - 消息提示
- `src/api/department.ts` - 获取学院列表

---

## 实现步骤

### 1. 在 `src/api/types.ts` 添加类型定义

```typescript
// ========== 教务管理员相关类型 ==========

// 教务管理员信息
export interface AcademicAdminInfoDTO {
  academicUuid: string
  academicNum: string
  academicName: string
  departmentInfo: DepartmentInfoDTO
}

// 添加/更新教务管理员请求
export interface AddAcademicAdminVO {
  academicUuid?: string      // 更新时需要
  academicNum: string        // 教务工号
  academicName: string       // 教务名称
  departmentUuid: string     // 所属学院UUID
  academicPassword?: string  // 密码（添加必填，更新可选）
}

// 教务管理员分页查询参数
export interface AcademicAdminPageQuery {
  page: number
  size: number
  academic_name?: string     // 教务名称（模糊查询）
  academic_num?: string      // 教务工号（模糊查询）
  department_uuid?: string   // 学院UUID（精确查询）
}
```

### 2. 创建 `src/api/academicAdmin.ts` API 模块

```typescript
/**
 * 教务管理员管理相关 API
 */
import request from './index'
import type {
  AcademicAdminInfoDTO,
  AddAcademicAdminVO,
  AcademicAdminPageQuery,
  PageDTO,
} from './types'

/**
 * 分页查询教务管理员列表
 */
export function getAcademicAdminPage(params: AcademicAdminPageQuery): Promise<PageDTO<AcademicAdminInfoDTO>> {
  return request({
    url: '/v1/academic/getPage',
    method: 'get',
    params,
  })
}

/**
 * 获取单个教务管理员详情
 */
export function getAcademicAdminInfo(academicUuid: string): Promise<AcademicAdminInfoDTO> {
  return request({
    url: '/v1/academic/get',
    method: 'get',
    params: {
      academic_uuid: academicUuid,
    },
  })
}

/**
 * 添加教务管理员
 */
export function addAcademicAdmin(data: AddAcademicAdminVO): Promise<void> {
  return request({
    url: '/v1/academic/add',
    method: 'post',
    data,
  })
}

/**
 * 更新教务管理员信息
 */
export function updateAcademicAdmin(data: AddAcademicAdminVO): Promise<void> {
  return request({
    url: '/v1/academic/update',
    method: 'put',
    data,
  })
}

/**
 * 删除教务管理员
 */
export function deleteAcademicAdmin(academicUuid: string): Promise<void> {
  return request({
    url: '/v1/academic/delete',
    method: 'delete',
    params: {
      academic_uuid: academicUuid,
    },
  })
}
```

### 3. 创建 `src/views/AcademicManagementView.vue` 页面

参考 `TeacherManagementView.vue` 实现，但简化以下内容：
- 无需职称、时间偏好、状态等字段
- 表单字段更少：工号、姓名、所属学院、密码
- 使用卡片或表格展示列表

### 4. 在 `src/router/index.ts` 添加路由

```typescript
{
  path: '/academic-management',
  name: 'AcademicManagement',
  component: () => import('../views/AcademicManagementView.vue'),
  meta: { requiresAuth: true, allowedRoles: ['SYSTEM_ADMIN'] }
}
```

### 5. 在 `src/views/HomeView.vue` 添加首页卡片

在系统管理员可见区域添加"教务管理员管理"入口卡片。

### 6. 运行类型检查

```bash
npm run type-check
```

---

## 页面字段对照表

| 显示名称 | 字段名（响应） | 字段名（请求） | 类型 | 必填 |
|---------|--------------|--------------|------|-----|
| 教务UUID | academicUuid | academicUuid | string | 更新时 |
| 教务工号 | academicNum | academicNum | string | 是 |
| 教务名称 | academicName | academicName | string | 是 |
| 所属学院 | departmentInfo.departmentName | departmentUuid | string | 是 |
| 密码 | - | academicPassword | string | 添加时必填 |

---

## 注意事项

1. **权限控制**：所有接口仅限 `SYSTEM_ADMIN` 角色，前端路由需配置 `allowedRoles`
2. **学院下拉**：添加/编辑时需要调用 `getDepartmentPage` 获取学院列表
3. **密码处理**：编辑时密码留空表示不更新密码
4. **删除确认**：删除前需要用户二次确认，提示教务管理员名称
